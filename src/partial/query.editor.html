<query-editor-row id="queryCtrlBox" query-ctrl="ctrl" class="generic-datasource-query-row" can-collaspe="true" has-text-edit-mode="true">
    <!-- Free form text area for typing up custom queries-->
    <div class="gf-form" ng-show="ctrl.target.textEditor">
        <textarea type="text" rows="5"class="gf-form-input" ng-model="ctrl.target.target" spellcheck="false" ng-blur="ctrl.textEditorChanged()"></textarea>
    </div>

    <!-- Query Builder -->
    <div ng-hide="ctrl.target.textEditor">
        <!-- Phasor List Picker-->
        <div style="width: 100%">
            <div class="gf-form-inline">
                <label class="gf-form-label query-keyword width-10">
                    <span>Phasors</span>
                </label>
                <div ng-repeat="phasor in ctrl.target.phasorSegments" role="menuitem">
                    <metric-segment segment="phasor" get-options="ctrl.getPhasorSegments('edit')" on-change="ctrl.phasorValueChanged(phasor,$index)"></metric-segment>
                </div>
                <metric-segment segment="ctrl.target.phasorSegment" get-options="ctrl.getPhasorSegments('add')" on-change="ctrl.addPhasorSegment()"></metric-segment>
                <div class="gf-form gf-form--grow">
                    <div class="gf-form-label gf-form-label--grow"></div>
                </div>

            </div>
        </div>

        <div style="width: 100%">
            <div class="gf-form-inline">
                <label class="gf-form-label query-keyword width-10">
                    <span>Reference Site</span>
                </label>
                <metric-segment segment="ctrl.target.referencePhasorSegment" get-options="ctrl.getReferencePhasorSegments()" on-change="ctrl.addReferencePhasorSegment()"></metric-segment>
                <div class="gf-form gf-form--grow">
                    <div class="gf-form-label gf-form-label--grow"></div>
                </div>
            </div>
        </div>


        <!--<div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-9">
                    <span>Unwrap Angles</span>
                </label>
                <gf-form-switch class="gf-form" switch-class="max-width-6" label="" checked="ctrl.target.unwrapPhasorAngle" on-change="ctrl.setTargetWithPhasors()"></gf-form-switch>
            </div>
        </div>-->
    </div>
</query-editor-row>
